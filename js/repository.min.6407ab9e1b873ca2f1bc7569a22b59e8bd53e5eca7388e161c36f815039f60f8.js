function load_repository(e,t){var n,s=document.getElementById(t);s.innerHTML="... Loading data into the repository ...",n=new XMLHttpRequest,n.responseType="json",n.onreadystatechange=function(){n.readyState==4&&n.status=="200"&&build_repository(n.response,t)},n.open("GET",e,!0),n.send(null)}function build_repository(e,t){var n=new Repository(t,e)}function make_link(e,t,n){var s=document.createElement("a");s.href="#",s.onclick=n,s.innerHTML=t,e.append(s),e.append(document.createTextNode(" "))}class Repository{constructor(e,t){var n=document.getElementById(e),s=this;this.pagediv=document.createElement("div"),this.pagediv.classList.add("pagination"),this.data=t,this.timeout=5,this.paginate=25,this.page=0,this.indices=Array.from(this.data.keys()),this.filtered=this.indices,this.in_filter=document.createElement("input"),this.in_filter.classList.add("filter"),this.in_filter.oninput=function(){clearTimeout(s.timeout),s.timeout=setTimeout(function(){s.update_filter()},500)},this.container=document.createElement("div"),this.container.classList.add("repository"),n.innerHTML="Filter: ",n.append(this.in_filter),n.append(this.pagediv),n.append(this.container),this.update_filter()}update_filter(){if(this.container.innerHTML="Updating filter",!this.in_filter.value){this.filtered=this.indices,this.fill();return}var t,o,i,n=new Array(0),a=this.in_filter.value,e=a.match(/(?:[^\s"]+|"[^"]*")+/g),s=new Array(0);for(t in e)s.push(new RegExp(e[t],"i"));loopm:for(o in this.data){for(t in e){i=s[t];try{if(!matches_filter(this.data[o],i))continue loopm}catch{continue loopm}}n.push(o)}this.filtered=n,this.fill()}first_page(){this.set_page(0)}prev_page(){this.set_page(this.page-1)}next_page(){this.set_page(this.page+1)}last_page(){this.set_page(this.filtered.length)}set_page(e){e<0&&(e=0),e*this.paginate>=this.filtered.length&&(e=Math.ceil(this.filtered.length/this.paginate)-1),e!=this.page&&(this.page=e,this.fill())}fill(){var e,t,s,o,a,n=this.page*this.paginate,r=n+this.paginate,i=this;if(this.pagecount=Math.ceil(this.filtered.length/this.paginate),this.pagecount==1)this.pagediv.innerHTML=this.filtered.length+" elements.";else{this.pagediv.innerHTML=this.filtered.length+" elements ("+this.pagecount+" pages of "+this.paginate+"). ";for(e=0;e<this.pagecount;e++)s=e,e==this.page?this.pagediv.append(document.createTextNode(" ["+(e+1)+"] ")):make_link(this.pagediv,""+(s+1),page_func(i,e))}this.container.innerHTML="";for(a of this.filtered.slice(n,r))o=this.data[a],t=document.createElement("div"),t.classList.add("entry"),t.append(format_entry(o)),this.container.append(t)}}function page_func(e,t){return function(){e.set_page(t)}}function value_matches_filter(e,t){return!!e&&e.search(t)>=0}function array_matches_filter(e,t){if(e)for(idx in e)if(value_matches_filter(e[idx],t))return!0;return!1}function matches_filter(e,t){return e.title.search(t)>=0}function format_entry(e){return info=document.createElement("p"),info.innerHTML='<a href="'+e.link+'"><b>'+e.title+'</b></a><br/><!--<time datetime="'+e.date+'">'+e.date+"</time>-->",info}